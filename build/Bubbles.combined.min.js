var Bubble;Bubble=function(){function a(a){this.parent=a,this.randomize(),this.initProperties()}return a.prototype.x=0,a.prototype.y=0,a.prototype.speed=0,a.prototype.radius=0,a.prototype.radians=0,a.prototype.radiansInt=0,a.prototype.initProperties=function(){var a;a=this.parent.cache,this.strokeWidth=this.parent.options.strokeWidth,this.strokeColor=a.strokeColor,this.centerColor=a.centerColor,this.sideColor=a.sideColor},a.prototype.randomize=function(){var a;a=this.parent.options,this.radius=Math.round(Math.random()*(a.maxSize-a.minSize)+a.minSize),this.speed=Math.round(5*Math.random()+4)/a.delay,this.radians=Math.random()*Math.PI,Math.random()>.5&&(this.radians*=-1),this.radiansInt=(4*Math.random()-1)/100,this.x=Math.round(Math.random()*this.parent.width),this.y=this.parent.height+this.radius},a.prototype.move=function(){this.y-=this.speed,this.radians+=this.radiansInt,this.x-=Math.sin(this.radians)},a.prototype.reachedTop=function(){return this.y<-this.radius},a.prototype.generateGradient=function(){var a,b,c;return b=this.x-this.radius/3,c=this.y-this.radius/3,a=this.parent.ctx.createRadialGradient(b,c,this.radius/2,b,c,1.5*this.radius),a.addColorStop(0,this.centerColor),a.addColorStop(1,this.sideColor),a},a}();var Bubbles,__bind=function(a,b){return function(){return a.apply(b,arguments)}};Bubbles=function(){function a(a,b){var c;return null==b&&(b={}),this.removeChildrenIntv=__bind(this.removeChildrenIntv,this),this.addChildrenIntv=__bind(this.addChildrenIntv,this),this.resetCache=__bind(this.resetCache,this),c=document.getElementById(a),c&&c.getContext&&c.getContext("2d")?(this.initProperties(c,b),this.initIntervals(),void this.generateFrame()):void console.log("ERR: no 2d context")}return a.prototype.ctx=null,a.prototype.height=0,a.prototype.width=0,a.prototype.children=[],a.prototype.options={},a.prototype.defaultOptions={maxSize:80,minSize:20,amount:100,delay:1,red:0,green:144,blue:255,strokeWidth:4,strokeOpacity:.4,centerOpacity:.1,sideOpacity:.5},a.prototype.cache={strokeColor:"",centerColor:"",sideColor:""},a.prototype.initProperties=function(a,b){var c,d,e;this.height=a.height,this.width=a.width,this.ctx=a.getContext("2d"),e=this.defaultOptions;for(d in e)c=e[d],this.options[d]=null!=b[d]?b[d]:c},a.prototype.initIntervals=function(){this.resetCache(),setInterval(this.resetCache,1e3),setInterval(this.addChildrenIntv,50),setInterval(this.removeChildrenIntv,500)},a.prototype.resetCache=function(){var a;a="rgba("+this.options.red+", "+this.options.green+", "+this.options.blue+", {0})",this.cache.strokeColor=a.replace("{0}",this.options.strokeOpacity),this.cache.centerColor=a.replace("{0}",this.options.centerOpacity),this.cache.sideColor=a.replace("{0}",this.options.sideOpacity)},a.prototype.addChildrenIntv=function(){this.children.length<this.options.amount&&this.children.push(new Bubble(this))},a.prototype.removeChildrenIntv=function(){var a;this.children=function(){var b,c,d,e;for(d=this.children,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.reachedTop()||e.push(a);return e}.call(this)},a.prototype.generateFrame=function(){var a,b,c,d,e,f,g,h;for(this.ctx.clearRect(0,0,this.width,this.height),g=this.children,c=0,e=g.length;e>c;c++)a=g[c],this.addCtxChild(a);for(h=this.children,d=0,f=h.length;f>d;d++)a=h[d],a.move();b=this,setTimeout(function(){b.generateFrame()},35)},a.prototype.addCtxChild=function(a){this.ctx.beginPath(),this.ctx.moveTo(a.x+a.radius,a.y),this.ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),this.ctx.fillStyle=a.generateGradient(),this.ctx.fill(),0!==a.strokeWidth&&(this.ctx.lineWidth=a.strokeWidth,this.ctx.strokeStyle=a.strokeColor,this.ctx.stroke())},a}();